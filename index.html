<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>GW-BASIC with Mapper</title>
<link rel="stylesheet" href="jsdos/js-dos.css">
<style>
  body, html { margin:0; height:100%; background:#000; display:flex; flex-direction:column; }
  #dosbox { flex:1; width:100%; height:100%; display:block; }
  #startBtn { position:fixed; bottom:10px; left:10px; z-index:1000; padding:10px 20px; font-size:16px; }
</style>
</head>
<body>
<button id="startBtn">Start GW-BASIC</button>
<canvas id="dosbox"></canvas>

<script src="jsdos/js-dos.js"></script>
<script>
const startBtn = document.getElementById("startBtn");
startBtn.addEventListener("click", () => {

    const canvas = document.getElementById("dosbox");
    canvas.focus();

    Dos(canvas, { wdosboxUrl: "jsdos/wdosbox.js" })
    .ready((fs, main) => {

        fs.extract("basic.zip").then(() => {

            // Start DOSBox with mapper and config
            main(['-startmapper', '-conf', 'dosbox.conf'])
            .then((ci) => {
                // Canvas focused to accept keyboard input
                canvas.focus();

                // Optionally, you can log key events
                // ci.getKeyEventConsumer() handles all mapper input
                console.log("GW-BASIC is ready! Use your keyboard.");
            });

        });

    });

});
</script>
</body>
</html>
